[OSEv3:children]
masters
nodes
etcd

[OSEv3:vars]
ansible_ssh_user=cloud-user
ansible_become=yes

openshift_deployment_type=openshift-enterprise
openshift_release=v3.7

openshift_install_examples=false

openshift_master_identity_providers=[{'name': 'allow_all', 'login': 'true', 'challenge': 'true', 'kind': 'AllowAllPasswordIdentityProvider'}]

openshift_cloudprovider_kind=openstack
openshift_cloudprovider_openstack_auth_url={{ osp.auth.auth_url }}
openshift_cloudprovider_openstack_username={{ osp.auth.username }}
openshift_cloudprovider_openstack_password={{ osp.auth.password }}
openshift_cloudprovider_openstack_domain_name={{ osp.auth.user_domain_name }}
openshift_cloudprovider_openstack_tenant_name=lab

osm_use_cockpit=true
osm_cockpit_plugins=['cockpit-kubernetes']

openshift_metrics_install_metrics=true
openshift_logging_install_logging=true

openshift_master_api_port=8443
openshift_master_console_port=8443

openshift_override_hostname_check=true

openshift_disable_check=disk_availability,docker_storage,memory_availability

openshift_router_selector="region=all-in-one"
openshift_registry_selector="region=all-in-one"

openshift_master_cluster_hostname={{ ocp.hostname }}
openshift_master_cluster_public_hostname={{ ocp.public }}
openshift_master_default_subdomain={{ ocp.subdomain }}

openshift_template_service_broker_namespaces=['openshift']

[masters]
{{ ocp.hostname }} openshift_hostname={{ ocp.hostname }}

[etcd]
{{ ocp.hostname }} openshift_hostname={{ ocp.hostname }}

[nodes]
{{ ocp.hostname }} openshift_hostname={{ ocp.hostname }} ansible_connection=local openshift_schedulable=true openshift_node_labels="{'region': 'all-in-one', 'zone': 'default'}"
